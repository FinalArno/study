## Http 协议

http 是一个简单的请求-响应协议，全名叫超文本传输协议，它运行在 TCP 之上，它指定了客户端可以给服务端发送什么样的消息以及得到什么样的响应
请求和响应头以 ASCII 码发送

### TCP 是指传输层，TCP/IP 是七层传输协议的总称，七层传输协议如下

1. 应用层
2. 表示层
3. 会话层
4. 传输层
5. 网络层
6. 数据链路层
7. 物理层

### 工作原理，面向连接，http 事物如下

1. 客户端与服务端建立连接
2. 客户端向服务端发起请求
3. 服务端接受请求，并向客户端返回相应请求的文件
4. 客户端与服务端关闭连接

### http 协议是一种无状态的，即服务端不需要保存与客户端的任何状态，如何解决无状态的问题

> 通过 cookie 和 session

http 协议它也是一种面向对象的协议，可以传输任意数据类型的对象
http 协议有 9 种请求方法，常用的有 get 与 post

- http 请求由 请求行， 请求头， 空行， 请求正文 组成
- http 响应由 状态码， 响应头， 空行， 响应体 组成

1. GET：用？代表 url 的结尾以及附带参数的开始，用 key=value 的形式书写，参数与参数之间用&符号连接，最多不能超过 1024
2. POST： 方法将请求的参数封装在了 HTTP 请求的请求体中,以名称/值的形式出现,可以传输大量的数据.POST 请求一般用于表单数据的提交中.
3. PUT： 传输文件，报文主体中包含文件内容，保存到对应 URI 位置。
4. HEAD： 获得报文首部，与 GET 方法类似，只是不返回报文主体，一般用于验证 URI 是否有效。
5. DELETE：删除文件，与 PUT 方法相反，删除对应 URI 位置的文件。
6. OPTIONS：查询相应 URI 支持的 HTTP 方法。
7. TRACE：请求服务器回送收到的请求信息，主要用语测试或诊断

### 从 http1.1 开始请求头里会由 keep-alive 字段

它可以保持连接特性，简单地说，当一个网页打开完成后，客户端和服务器之间用于传输 HTTP 数据的 TCP 连接不会关闭，如果客户端再次访问这个服务器上的网页，会继续使用这一条已经建立的连接，Keep-Alive 不会永久保持连接，它有一个保持时间，可以在不同的服务器软件（如 Apache）中设定这个时间

## 在浏览器输入 url，敲回车会经历以下流程

1. 浏览器向 dns 服务器请求该 url 域名对应的 ip 地址（域名解析过程：浏览器自身 DNS 缓存---》OS 自身的 DNS 缓存--》读取 host 文件--》本地域名服务器--》权限域名服务器--》根域名服务器）
2. 解析处 ip 地址后，根据该 ip 地址和默认端口 80，和服务器建立 tcp 连接
3. 浏览器发起读取文件的请求，该请求作为 tcp 三次握手的第三次请求报文的数据发送给服务器
4. 服务器响应浏览器，将对应的 html 文本发送给浏览器端
5. 释放 tcp 连接
6. 浏览器解析 html 文本，并请求 html 文件中的资源
7. 浏览器对页面进行渲染，展现给用户

### 302 状态吗

表示重定向，在这种情况下，服务端返回的响应头里会有一个 localtion 字段，内容是重定向的 url 地址

![image]('/image/http.png')

## Http 与 Https 优缺点？

1. 通信使用明文不加密，内容可能被窃听，也就是被抓包分析。
2. 不验证通信方身份，可能遭到伪装
3. 无法验证报文完整性，可能被篡改
4. HTTPS 就是 HTTP 加上加密处理（一般是 SSL 安全通信线路）+认证+完整性保护

## HTTP 优化

1. 利用负载均衡优化和加速 HTTP 应用
2. 利用 HTTP Cache 来优化网站

200：请求被正常处理
204：请求被受理但没有资源可以返回
206：客户端只是请求资源的一部分，服务器只对请求的部分资源执行 GET 方法，相应报文中通过 Content-Range 指定范围的资源。
301：永久性重定向
302：临时重定向
303：与 302 状态码有相似功能，只是它希望客户端在请求一个 URI 的时候，能通过 GET 方法重定向到另一个 URI 上
304：发送附带条件的请求时，条件不满足时返回，与重定向无关
307：临时重定向，与 302 类似，只是强制要求使用 POST 方法
400：请求报文语法有误，服务器无法识别
401：请求需要认证
403：请求的对应资源禁止被访问
404：服务器无法找到对应资源
500：服务器内部错误
503：服务器正忙
